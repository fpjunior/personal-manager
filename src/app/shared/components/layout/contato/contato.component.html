<div>
  <p-dialog #dialogDrop (onHide)="onHideDialog()" [draggable]="false" closeIcon="fa fa-times" [modal]="true"
    [baseZIndex]="10000" [(visible)]="showDialogContact" header="Cadastrar Novo Contato">
    <form method="post" [formGroup]="contactsForm" (ngSubmit)="saveContact(contactsForm)">
      <div class="p-grid">

        <div class="field col-3 form-applications">
          <input-text label="Nome" formControlName="name" id="name" [type]="'text'">
          </input-text>
        </div>

        <div class="field col-3 form-applications">
          <input-text label="Idade" [control]="contactsForm.get('idade')" [requiredLabel]="true" formControlName="idade"
            id="idade" [type]="'text'">
          </input-text>
        </div>

        <div class="field col-3 form-applications">
          <input-text label="CPF" [control]="contactsForm.get('cpf')" [requiredLabel]="true" formControlName="cpf"
            id="cpf" [type]="'text'">
          </input-text>
        </div>

        <div class="field col-3 form-applications">
          <input-text label="Email" [control]="contactsForm.get('email')" [requiredLabel]="true" formControlName="email"
            id="email" [type]="'text'">
          </input-text>
        </div>
      </div>

      <div class="buttons-actions">
        <p-button type="submit" icon="fa fa-check" [disabled]="this.contactsForm.invalid" class="standard tableButton-def"
          label="Salvar">
        </p-button>
        <p-button type="button" icon="fa fa-times" (onClick)="showDialogContact = false" class="dismiss tableButton"
          label="Cancelar">
        </p-button>
      </div>

    </form>
  </p-dialog>

  <div class="grid input-button-search">
    <span class="p-input-icon-left p-ml-auto">
      <i class="pi pi-search"></i>
      <input class="input-search" pInputText type="text" (input)="dt.filterGlobal($event.target.value, 'contains')"
        placeholder="Digite o nome ou a idade do contato" />
      <p-button pRipple label="Criar Contato" class="standard btn-criar-contato" type="button"
        (click)="openDialogAddContact()">
      </p-button>
    </span>
  </div>
  <p-table #dt [value]="dataToFillTable" [columns]="cols" [paginator]="true" [rows]="10" [showCurrentPageReport]="true"
    currentPageReportTemplate="Mostrando {first} a {last} de {totalRecords} entradas" [rowsPerPageOptions]="[5,10,25]"
    [globalFilterFields]="['name','idade']" [globalFilterFields]="['name','idade','cpf','email']" sortField="id"
    [reorderableColumns]="true" [sortOrder]="-1" responsiveLayout="scroll" [loading]="loading" [scrollable]="true"
    scrollHeight="400px" [filterDelay]="1500" [resizableColumns]="true">

    <ng-template pTemplate="header" let-columns>
      <tr>
        <th id="config" class="size-first-column">
          <button pButton type="button" class="tableButton-def" icon="fas fa-cog " (click)="showModalSelectColumns()"
            pTooltip="Configurações"></button>
        </th>

        <th columnResizeMode="expand" *ngFor="let col of columns; let i = index" [pTooltip]="col.hintName"
          tooltipPosition="top" [pSortableColumn]="col.field" pResizableColumn pReorderableColumn [id]="col.field">
          {{col.header}}
          <p-sortIcon *ngIf="col.field !== 'operation'" [field]="col.field"></p-sortIcon>

          <p-columnFilter *ngIf="col.field !== 'operation'" styleClass="button-operation" [type]="'text'"
            [field]="col.field" [matchMode]="'contains'" display="menu" #filterTable>
          </p-columnFilter>

        </th>
      </tr>
    </ng-template>
    <ng-template pTemplate="body" let-dataToFillTable let-rowData let-rowIndex="rowIndex" let-columns="columns">
      <tr>

        <td class="size-first-column" id="config"></td>
        <td *ngFor="let col of columns; let i = index" [id]="col.field">
          <span [pTooltip]="rowData[col.field]">
            {{rowData[col.field]}}
          </span>

          <div *ngIf="col.field=='operation'" class="justify-content-center" style="font-size: 16px">
            <p-button pRipple type="button" class="tableButton-def" icon="fas fa-pencil-alt"
                (click)="editContact(rowData)"></p-button>
            <p-button pRipple type="button" class="tableButton-def" icon="fas fa-trash"
                (click)="openDialogDelete(rowData.id)"></p-button>
        </div>
        </td>
      </tr>
    </ng-template>
  </p-table>
</div>

<app-confirm-dialog (onClose)="showModalDelete = false" (confirmEvent)="confirmDelete()"
(cancelEvent)="showModalDelete = false" [showModal]="showModalDelete" header="Confirmação"
content="Tem certeza que deseja excluir o contato selecionado?">
</app-confirm-dialog>


<generic-response-dialog [showModal]="showModalResponse" [isError]="isErrorResponse" [content]="contentResponse">
</generic-response-dialog>

<app-dialog-table-column (onClose)="onHideDialogTable()" [showModal]="showModalColumn" [fullCols]="fullCols"
  [colsModified]="cols" [immutables]="immutableCols" (saveColumn)="editColumns($event)">
</app-dialog-table-column>
